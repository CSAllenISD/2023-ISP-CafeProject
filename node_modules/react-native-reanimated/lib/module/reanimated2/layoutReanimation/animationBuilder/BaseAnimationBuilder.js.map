{"version":3,"names":["withDelay","BaseAnimationBuilder","Error","duration","durationMs","instance","createInstance","durationV","delay","delayMs","delayV","withCallback","callback","callbackV","getDuration","randomDelay","randomizeDelay","getDelay","Math","random","getDelayFunction","isDelayProvided","_","animation","build"],"sources":["BaseAnimationBuilder.ts"],"sourcesContent":["import { withDelay } from '../../animation';\nimport {\n  EntryExitAnimationFunction,\n  AnimationFunction,\n  LayoutAnimationFunction,\n} from './commonTypes';\n\nexport class BaseAnimationBuilder {\n  durationV?: number;\n  delayV?: number;\n  randomizeDelay = false;\n  callbackV?: (finished: boolean) => void;\n\n  static createInstance: () => BaseAnimationBuilder;\n  build = (): EntryExitAnimationFunction | LayoutAnimationFunction => {\n    throw Error('Unimplemented method in child class.');\n  };\n\n  static duration(durationMs: number): BaseAnimationBuilder {\n    const instance = this.createInstance();\n    return instance.duration(durationMs);\n  }\n\n  duration(durationMs: number): BaseAnimationBuilder {\n    this.durationV = durationMs;\n    return this;\n  }\n\n  static delay(delayMs: number): BaseAnimationBuilder {\n    const instance = this.createInstance();\n    return instance.delay(delayMs);\n  }\n\n  delay(delayMs: number): BaseAnimationBuilder {\n    this.delayV = delayMs;\n    return this;\n  }\n\n  static withCallback(\n    callback: (finished: boolean) => void\n  ): BaseAnimationBuilder {\n    const instance = this.createInstance();\n    return instance.withCallback(callback);\n  }\n\n  withCallback(callback: (finsihed: boolean) => void): BaseAnimationBuilder {\n    this.callbackV = callback;\n    return this;\n  }\n\n  // 300ms is the default animation duration. If any animation has different default has to override this method.\n  static getDuration(): number {\n    return 300;\n  }\n\n  getDuration(): number {\n    return this.durationV ?? 300;\n  }\n\n  static randomDelay(): BaseAnimationBuilder {\n    const instance = this.createInstance();\n    return instance.randomDelay();\n  }\n\n  randomDelay(): BaseAnimationBuilder {\n    this.randomizeDelay = true;\n    return this;\n  }\n\n  // when randomizeDelay is set to true, randomize delay between 0 and provided value (or 1000ms if delay is not provided)\n  getDelay(): number {\n    return this.randomizeDelay\n      ? Math.random() * (this.delayV ?? 1000)\n      : this.delayV ?? 0;\n  }\n\n  getDelayFunction(): AnimationFunction {\n    const isDelayProvided = this.randomizeDelay || this.delayV;\n    return isDelayProvided\n      ? withDelay\n      : (_, animation) => {\n          'worklet';\n          return animation;\n        };\n  }\n\n  static build(): EntryExitAnimationFunction | LayoutAnimationFunction {\n    const instance = this.createInstance();\n    return instance.build();\n  }\n}\n"],"mappings":";;AAAA,SAASA,SAAT,QAA0B,iBAA1B;AAOA,OAAO,MAAMC,oBAAN,CAA2B;EAAA;IAAA;;IAAA;;IAAA,wCAGf,KAHe;;IAAA;;IAAA,+BAOxB,MAA4D;MAClE,MAAMC,KAAK,CAAC,sCAAD,CAAX;IACD,CAT+B;EAAA;;EAWjB,OAARC,QAAQ,CAACC,UAAD,EAA2C;IACxD,MAAMC,QAAQ,GAAG,KAAKC,cAAL,EAAjB;IACA,OAAOD,QAAQ,CAACF,QAAT,CAAkBC,UAAlB,CAAP;EACD;;EAEDD,QAAQ,CAACC,UAAD,EAA2C;IACjD,KAAKG,SAAL,GAAiBH,UAAjB;IACA,OAAO,IAAP;EACD;;EAEW,OAALI,KAAK,CAACC,OAAD,EAAwC;IAClD,MAAMJ,QAAQ,GAAG,KAAKC,cAAL,EAAjB;IACA,OAAOD,QAAQ,CAACG,KAAT,CAAeC,OAAf,CAAP;EACD;;EAEDD,KAAK,CAACC,OAAD,EAAwC;IAC3C,KAAKC,MAAL,GAAcD,OAAd;IACA,OAAO,IAAP;EACD;;EAEkB,OAAZE,YAAY,CACjBC,QADiB,EAEK;IACtB,MAAMP,QAAQ,GAAG,KAAKC,cAAL,EAAjB;IACA,OAAOD,QAAQ,CAACM,YAAT,CAAsBC,QAAtB,CAAP;EACD;;EAEDD,YAAY,CAACC,QAAD,EAA8D;IACxE,KAAKC,SAAL,GAAiBD,QAAjB;IACA,OAAO,IAAP;EACD,CAzC+B,CA2ChC;;;EACkB,OAAXE,WAAW,GAAW;IAC3B,OAAO,GAAP;EACD;;EAEDA,WAAW,GAAW;IACpB,OAAO,KAAKP,SAAL,IAAkB,GAAzB;EACD;;EAEiB,OAAXQ,WAAW,GAAyB;IACzC,MAAMV,QAAQ,GAAG,KAAKC,cAAL,EAAjB;IACA,OAAOD,QAAQ,CAACU,WAAT,EAAP;EACD;;EAEDA,WAAW,GAAyB;IAClC,KAAKC,cAAL,GAAsB,IAAtB;IACA,OAAO,IAAP;EACD,CA5D+B,CA8DhC;;;EACAC,QAAQ,GAAW;IACjB,OAAO,KAAKD,cAAL,GACHE,IAAI,CAACC,MAAL,MAAiB,KAAKT,MAAL,IAAe,IAAhC,CADG,GAEH,KAAKA,MAAL,IAAe,CAFnB;EAGD;;EAEDU,gBAAgB,GAAsB;IACpC,MAAMC,eAAe,GAAG,KAAKL,cAAL,IAAuB,KAAKN,MAApD;IACA,OAAOW,eAAe,GAClBrB,SADkB,GAElB,CAACsB,CAAD,EAAIC,SAAJ,KAAkB;MAChB;;MACA,OAAOA,SAAP;IACD,CALL;EAMD;;EAEW,OAALC,KAAK,GAAyD;IACnE,MAAMnB,QAAQ,GAAG,KAAKC,cAAL,EAAjB;IACA,OAAOD,QAAQ,CAACmB,KAAT,EAAP;EACD;;AAlF+B;;gBAArBvB,oB"}