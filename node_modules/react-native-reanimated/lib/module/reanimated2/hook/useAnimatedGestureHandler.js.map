{"version":3,"names":["useEvent","useHandler","EventType","useAnimatedGestureHandler","handlers","dependencies","context","doDependenciesDiffer","useWeb","handler","e","event","nativeEvent","state","BEGAN","onStart","ACTIVE","onActive","oldState","END","onEnd","FAILED","onFail","CANCELLED","onCancel","onFinish"],"sources":["useAnimatedGestureHandler.ts"],"sourcesContent":["import { MutableRefObject } from 'react';\nimport { Context, WorkletFunction } from '../commonTypes';\nimport WorkletEventHandler from '../WorkletEventHandler';\nimport { DependencyList } from './commonTypes';\nimport { useEvent, useHandler } from './Hooks';\n\ninterface Handler<T, TContext extends Context> extends WorkletFunction {\n  (event: T, context: TContext, isCanceledOrFailed?: boolean): void;\n}\n\nexport interface GestureHandlers<T, TContext extends Context> {\n  [key: string]: Handler<T, TContext> | undefined;\n  onStart?: Handler<T, TContext>;\n  onActive?: Handler<T, TContext>;\n  onEnd?: Handler<T, TContext>;\n  onFail?: Handler<T, TContext>;\n  onCancel?: Handler<T, TContext>;\n  onFinish?: Handler<T, TContext>;\n}\n\nexport enum EventType {\n  UNDETERMINED = 0,\n  FAILED,\n  BEGAN,\n  CANCELLED,\n  ACTIVE,\n  END,\n}\n\nexport interface GestureHandlerStateChangeNativeEvent {\n  handlerTag: number;\n  numberOfPointers: number;\n  state: EventType;\n  oldState: EventType;\n}\n\nexport interface GestureHandlerEvent<T>\n  extends GestureHandlerStateChangeNativeEvent {\n  nativeEvent: T;\n}\n\nexport function useAnimatedGestureHandler<\n  T extends GestureHandlerEvent<T>,\n  TContext extends Context\n>(\n  handlers: GestureHandlers<T, TContext>,\n  dependencies?: DependencyList\n): MutableRefObject<WorkletEventHandler<T> | null> | ((e: T) => void) {\n  const { context, doDependenciesDiffer, useWeb } = useHandler<T, TContext>(\n    handlers,\n    dependencies\n  );\n\n  const handler = (e: T) => {\n    'worklet';\n    const event = useWeb ? e.nativeEvent : e;\n\n    if (event.state === EventType.BEGAN && handlers.onStart) {\n      handlers.onStart(event, context);\n    }\n    if (event.state === EventType.ACTIVE && handlers.onActive) {\n      handlers.onActive(event, context);\n    }\n    if (\n      event.oldState === EventType.ACTIVE &&\n      event.state === EventType.END &&\n      handlers.onEnd\n    ) {\n      handlers.onEnd(event, context);\n    }\n    if (\n      event.oldState === EventType.BEGAN &&\n      event.state === EventType.FAILED &&\n      handlers.onFail\n    ) {\n      handlers.onFail(event, context);\n    }\n    if (\n      event.oldState === EventType.ACTIVE &&\n      event.state === EventType.CANCELLED &&\n      handlers.onCancel\n    ) {\n      handlers.onCancel(event, context);\n    }\n    if (\n      (event.oldState === EventType.BEGAN ||\n        event.oldState === EventType.ACTIVE) &&\n      event.state !== EventType.BEGAN &&\n      event.state !== EventType.ACTIVE &&\n      handlers.onFinish\n    ) {\n      handlers.onFinish(\n        event,\n        context,\n        event.state === EventType.CANCELLED || event.state === EventType.FAILED\n      );\n    }\n  };\n\n  if (useWeb) {\n    return handler;\n  }\n\n  return useEvent<T>(\n    handler,\n    ['onGestureHandlerStateChange', 'onGestureHandlerEvent'],\n    doDependenciesDiffer\n  );\n}\n"],"mappings":"AAIA,SAASA,QAAT,EAAmBC,UAAnB,QAAqC,SAArC;AAgBA,WAAYC,SAAZ;;WAAYA,S;EAAAA,S,CAAAA,S;EAAAA,S,CAAAA,S;EAAAA,S,CAAAA,S;EAAAA,S,CAAAA,S;EAAAA,S,CAAAA,S;EAAAA,S,CAAAA,S;GAAAA,S,KAAAA,S;;AAqBZ,OAAO,SAASC,yBAAT,CAILC,QAJK,EAKLC,YALK,EAM+D;EACpE,MAAM;IAAEC,OAAF;IAAWC,oBAAX;IAAiCC;EAAjC,IAA4CP,UAAU,CAC1DG,QAD0D,EAE1DC,YAF0D,CAA5D;;EAKA,MAAMI,OAAO,GAAIC,CAAD,IAAU;IACxB;;IACA,MAAMC,KAAK,GAAGH,MAAM,GAAGE,CAAC,CAACE,WAAL,GAAmBF,CAAvC;;IAEA,IAAIC,KAAK,CAACE,KAAN,KAAgBX,SAAS,CAACY,KAA1B,IAAmCV,QAAQ,CAACW,OAAhD,EAAyD;MACvDX,QAAQ,CAACW,OAAT,CAAiBJ,KAAjB,EAAwBL,OAAxB;IACD;;IACD,IAAIK,KAAK,CAACE,KAAN,KAAgBX,SAAS,CAACc,MAA1B,IAAoCZ,QAAQ,CAACa,QAAjD,EAA2D;MACzDb,QAAQ,CAACa,QAAT,CAAkBN,KAAlB,EAAyBL,OAAzB;IACD;;IACD,IACEK,KAAK,CAACO,QAAN,KAAmBhB,SAAS,CAACc,MAA7B,IACAL,KAAK,CAACE,KAAN,KAAgBX,SAAS,CAACiB,GAD1B,IAEAf,QAAQ,CAACgB,KAHX,EAIE;MACAhB,QAAQ,CAACgB,KAAT,CAAeT,KAAf,EAAsBL,OAAtB;IACD;;IACD,IACEK,KAAK,CAACO,QAAN,KAAmBhB,SAAS,CAACY,KAA7B,IACAH,KAAK,CAACE,KAAN,KAAgBX,SAAS,CAACmB,MAD1B,IAEAjB,QAAQ,CAACkB,MAHX,EAIE;MACAlB,QAAQ,CAACkB,MAAT,CAAgBX,KAAhB,EAAuBL,OAAvB;IACD;;IACD,IACEK,KAAK,CAACO,QAAN,KAAmBhB,SAAS,CAACc,MAA7B,IACAL,KAAK,CAACE,KAAN,KAAgBX,SAAS,CAACqB,SAD1B,IAEAnB,QAAQ,CAACoB,QAHX,EAIE;MACApB,QAAQ,CAACoB,QAAT,CAAkBb,KAAlB,EAAyBL,OAAzB;IACD;;IACD,IACE,CAACK,KAAK,CAACO,QAAN,KAAmBhB,SAAS,CAACY,KAA7B,IACCH,KAAK,CAACO,QAAN,KAAmBhB,SAAS,CAACc,MAD/B,KAEAL,KAAK,CAACE,KAAN,KAAgBX,SAAS,CAACY,KAF1B,IAGAH,KAAK,CAACE,KAAN,KAAgBX,SAAS,CAACc,MAH1B,IAIAZ,QAAQ,CAACqB,QALX,EAME;MACArB,QAAQ,CAACqB,QAAT,CACEd,KADF,EAEEL,OAFF,EAGEK,KAAK,CAACE,KAAN,KAAgBX,SAAS,CAACqB,SAA1B,IAAuCZ,KAAK,CAACE,KAAN,KAAgBX,SAAS,CAACmB,MAHnE;IAKD;EACF,CA5CD;;EA8CA,IAAIb,MAAJ,EAAY;IACV,OAAOC,OAAP;EACD;;EAED,OAAOT,QAAQ,CACbS,OADa,EAEb,CAAC,6BAAD,EAAgC,uBAAhC,CAFa,EAGbF,oBAHa,CAAf;AAKD"}